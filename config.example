#!/bin/bash
#
# Settings file for minecraft-init
# ================================
#
# Make a copy of this file named config
# and edit the variables to your needs.
#
# For information see readme.markdown or visit:
# https://github.com/silkandslug/minecraft-init


# Location of bash shell on your system, by default we grab the first entry
# from which, however, you can manually set it to whatever you want.
BASH_PATH=$(which bash | cut -f3 -d' ' | sed -n 1p);

# Name of server (not critical, just makes output neater)
SERVERNAME='Minecraft Server'

# Name of vanilla server jar (no need to change if you're running craftbukkit and vice versa)
MC_JAR='minecraft_server.jar'

# Name of craftbukkit jar
CB_JAR="craftbukkit.jar"

# URL for downloading service updates.
UPDATE_URL='https://s3.amazonaws.com/MinecraftDownload/launcher/minecraft_server.jar'

# Define the release of CraftBukkit to use (stable or unstable)
CB_RELEASE="stable"

# Name of server.jar to use (either $MC_JAR or $CB_JAR)
MC_JAR=$MC_JAR

# Name to use for the screen instance
SCREEN='minecraft_screen'

# User that should run the server
USERNAME='minecraft'

# Path to minecraft server directory
MCPATH="/home/${USERNAME}/minecraft"

# Name of the world folder (default is 'world', should be same as level-name in server.properties)
WORLDNAME='world'

# Absolute path to minecraft server directory
MCPATH="$MCPATH/server"

# Path to server log file ($MCPATH/server.log on older versions)
SERVERLOG="$MCPATH/logs/latest.log"

# Choose whether to use the Ramdisk (highly recommended unless you have a solid-state drive)
USE_RAMDISK=true

# Where the worlds are located on the disk. Can not be the same as MCPATH.
# You need to move your worlds to this directory manually, the script
# will then handle the necessary symlinks.
WORLDSTORAGE="$MCPATH/worlds"

# Number of CPUs/cores to use
CPU_COUNT=2

# Initial memory usage
INIT_RAM="2048M"

# Maximum amount of memory to use
# Remember: give the ramdisk enough space, subtract from the total amount
# of RAM available the size of your map and the RAM-consumption of your base system.
MAX_RAM="2048M"

# Whether to output commands for the plugin ConsoleLikeChat ($1 is the command to run)
FORMAT="\$1"


# Settings for backups
# ===============================

# Absolute path to world backup directory
WORLDBACKUP="$MCPATH/backups/worlds"

# Where the whole minecraft directory is copied when full-backup is executed.
# Full-backup is a complete uncompressed backup of the whole server folder.
FULLBACKUP="$MCPATH/backups/server"

# Absolute path to server.log backup directory for log-roll command
BACKUPLOG="$MCPATH/backups/logs"


# Format for world backup (tar or zip).
BACKUPFORMAT="tar"

# Normally backups will be put in a subfolder to $WORLDBACKUP with todays date
# and the backups themselves will have a timestamp.
#
# But if BACKUPSCRIPTCOMPATIBLE is set the world backups will be put directly
# in $WORLDBACKUP without timestamp to be compatible with
# [backup rotation script](https://github.com/adamfeuer/rotate-backups)
#
BACKUPSCRIPTCOMPATIBLE=YES

# If WORLDEDITCOMPATIBLE is set the world backups will be created compatible to WorldEdit
# in $WORLDBACKUP as WORLD_NAME/DATE.(tar.bz2|zip) with the requested directory structure
#
# WORLDEDITCOMPATIBLE=YES

# Compress the whole backup with bzip2?
# Note that this may not save a lot of disk space since there can be a lot of files
# in your server directory, that are already compressed, but it can slow down the
# backup a bit. This highly depends on the plugins you're using.
#
# For example: The png files generated by Dynmap are already compressed and still use
# a lot of space in your server directory, so the compression ratio of the compressed
# backup will not be very high.
COMPRESS_FULLBACKUP=YES


# Settings for log rolling
# ===============================

# Location for old logs
# Used by the log-roll command
LOGPATH="$MCPATH/backups/logs"

# Whether or not to gzip logs (must be commented out for no - DO NOT CHANGE TO NO)
GZIPLOGS=YES

# What to append to the logfile name (Leave blank for nothing)
LOGFILEAPPEND="logfile_"


# Settings for overviewer command
# ===============================

# Where the Map is generated
OUTPUTMAP="$MCPATH/mc-overviewer/render"

# Path to Minecraft-Overviewer
OVPATH="$MCPATH/mc-overviewer/bin"

# Path for the config file of Overviewer
OVCONFIGPATH="$MCPATH/overviewer"

# Name of Overviewer config file
OVCONFIGNAME="config.py"

# Path for backup worlds
OVBACKUP="$MCPATH/mc-overviewer/backups"


# Things to leave alone ;)
# =====================

# Command string used for starting the server
INVOCATION="java -Xmx$MAX_RAM -Xms$INIT_RAM -Xincgc -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalPacing -XX:ParallelGCThreads=$CPU_COUNT -XX:+AggressiveOpts -jar $MC_JAR nogui"

# Absolute path to the the mounted ramdisk (default in Ubuntu: /dev/shm)
RAMDISK="/dev/shm"
